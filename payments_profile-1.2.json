{"apiVersion":"v1","swaggerVersion":"1.2","resourcePath":"/payment_profiles","produces":["application/json; charset=UTF-8"],"apis":[{"path":"/v1/payment_profiles","operations":[{"notes":"\u003cp\u003eUtilize este método para listar perfis de pagamento associados à sua conta na Vindi. Leia a documentação sobre \u003ca href=\"http://atendimento.vindi.com.br/hc/pt-br/articles/203020644#pagination\"\u003epaginação\u003c/a\u003e e \u003ca href=\"http://atendimento.vindi.com.br/hc/pt-br/articles/204163150\"\u003efiltros de busca\u003c/a\u003e.\u003c/p\u003e\n\n\u003ch4 id=\"exemplo\"\u003eExemplo\u003c/h4\u003e\n\u003cp\u003ePara verificar se determinado cliente possui um cartão de crédito ativo, utilize os seguintes filtros no parâmetro \u003ccode\u003equery\u003c/code\u003e:\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003ecustomer_id=[id do cliente] status=active type=PaymentProfile::CreditCard\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003ch4 id=\"atributos-para-busca\"\u003eAtributos para busca\u003c/h4\u003e\n\u003cp\u003e\u003ccode\u003eid\u003c/code\u003e, \u003ccode\u003ecustomer_id\u003c/code\u003e, \u003ccode\u003ecard_number_first_six\u003c/code\u003e, \u003ccode\u003ecard_number_last_four\u003c/code\u003e, \u003ccode\u003ecard_expiration\u003c/code\u003e, \u003ccode\u003epayment_method_id\u003c/code\u003e, \u003ccode\u003estatus\u003c/code\u003e, \u003ccode\u003etype\u003c/code\u003e, \u003ccode\u003ecreated_at\u003c/code\u003e, \u003ccode\u003eregistry_code\u003c/code\u003e, \u003ccode\u003ebank_account\u003c/code\u003e, \u003ccode\u003ebank_branch\u003c/code\u003e e \u003ccode\u003eupdated_at\u003c/code\u003e.\u003c/p\u003e\n","summary":"Retorna uma lista de perfis de pagamento.","nickname":"GET--version-payment_profiles---format-","method":"GET","parameters":[{"paramType":"query","name":"page","description":"\u003cp\u003ePage of results to fetch.\u003c/p\u003e\n","type":"integer","required":false,"allowMultiple":false,"format":"int32","defaultValue":1},{"paramType":"query","name":"per_page","description":"\u003cp\u003eNumber of results to return per page.\u003c/p\u003e\n","type":"integer","required":false,"allowMultiple":false,"format":"int32"},{"paramType":"query","name":"query","description":"\u003cp\u003eFiltro para busca\u003c/p\u003e\n","type":"string","required":false,"allowMultiple":false},{"paramType":"query","name":"sort_by","description":"\u003cp\u003eAtributo opcional para ordenação\u003c/p\u003e\n","type":"string","required":false,"allowMultiple":false,"defaultValue":"created_at","enum":["id","customer_id","card_number_first_six","card_number_last_four","card_expiration","payment_method_id","status","type","created_at","registry_code","bank_account","bank_branch","updated_at"]},{"paramType":"query","name":"sort_order","description":"\u003cp\u003eSentido opcional para ordenação\u003c/p\u003e\n","type":"string","required":false,"allowMultiple":false,"defaultValue":"asc","enum":["asc","desc"]}],"type":"PaymentProfile","responseMessages":[{"code":200,"message":"Consulta realizada com sucesso."},{"code":422,"message":"Parâmetros inválidos. Verificar erro na resposta."},{"code":400,"message":"Erro de sintaxe JSON no corpo do request."}]},{"notes":"\u003cp\u003eO perfil de pagamento representa um cartão de crédito ou uma conta bancária armazenada na plataforma Vindi. Leia mais na \u003ca href=\"http://atendimento.vindi.com.br/hc/pt-br/articles/204406204-Perfil-de-pagamento\"\u003edocumentação\u003c/a\u003e.\u003c/p\u003e\n\n\u003ch4 id=\"exemplo-de-requisio-para-carto-de-crdito\"\u003eExemplo de requisição para cartão de crédito\u003c/h4\u003e\n\u003cpre\u003e\u003ccode\u003e{\n  \"holder_name\": \"José da Silva\",\n  \"card_expiration\": \"12/2018\",\n  \"card_number\": \"5167454851671773\",\n  \"card_cvv\": \"123\",\n  \"payment_method_code\": \"credit_card\",\n  \"payment_company_code\": \"mastercard\",\n  \"customer_id\": 51\n}\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003ch4 id=\"exemplo-de-requisio-para-dados-bancrios\"\u003eExemplo de requisição para dados bancários\u003c/h4\u003e\n\u003cpre\u003e\u003ccode\u003e{\n  \"holder_name\": \"José da Silva\",\n  \"registry_code\": \"27721264391\",\n  \"bank_branch\": \"0964\",\n  \"bank_account\": \"71233-1\",\n  \"payment_method_code\": \"bank_debit\",\n  \"payment_company_code\": \"itau\",\n  \"customer_id\": 51\n}\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003ch4 id=\"bandeiras-e-bancos-disponveis\"\u003eBandeiras e bancos disponíveis\u003c/h4\u003e\n\u003cp\u003ePara uma lista completa de códigos de bancos e bandeiras suportadas pela sua conta, utilize o endpoint \u003ccode\u003eGET /payment_methods\u003c/code\u003e e verifique o atributo \u003ccode\u003epayment_companies.code\u003c/code\u003e.\u003c/p\u003e\n\n\u003ch4 id=\"deteco-automtica-de-bandeira\"\u003eDetecção automática de bandeira\u003c/h4\u003e\n\u003cp\u003eCaso o parâmetro \u003ccode\u003epayment_company_code\u003c/code\u003e não seja informado, a plataforma irá tentar detectar a bandeira do cartão de crédito através do número informado. Este método não garante a detecção automática de bandeiras sem faixas de BIN/IIN definidas publicamente (Elo, Hipercard, Hiper, etc). Se você pretende utilizar cartões destas bandeiras, solicite a bandeira no seu formulário de pagamento e envie através do parâmetro \u003ccode\u003epayment_company_code\u003c/code\u003e.\u003c/p\u003e\n\n\u003cp\u003eNo caso do débito em conta, \u003ccode\u003epayment_company_code\u003c/code\u003e é obrigatório.\u003c/p\u003e\n","summary":"Cadastra um novo perfil de pagamento para um cliente existente.","nickname":"POST--version-payment_profiles---format-","method":"POST","parameters":[{"paramType":"body","name":"body","description":"\u003cp\u003eJSON com atributos do novo perfil de pagamento.\u003c/p\u003e\n","type":"PaymentProfile::Parameters::Create","required":false,"allowMultiple":false}],"type":"PaymentProfile","responseMessages":[{"code":201,"message":"Perfil de pagamento cadastrado com sucesso."},{"code":422,"message":"Parâmetros inválidos. Verificar erro na resposta."},{"code":400,"message":"Erro de sintaxe JSON no corpo do request."}]}]},{"path":"/v1/payment_profiles/{id}","operations":[{"notes":"","summary":"Retorna um perfil de pagamento específico através do ID.","nickname":"GET--version-payment_profiles--id---format-","method":"GET","parameters":[{"paramType":"path","name":"id","description":"\u003cp\u003eID do perfil de pagamento que deverá ser retornado.\u003c/p\u003e\n","type":"integer","required":true,"allowMultiple":false,"format":"int32"}],"type":"PaymentProfile","responseMessages":[{"code":200,"message":"Ok. Perfil de pagamento encontrado."},{"code":404,"message":"Perfil de pagamento não encontrado."},{"code":422,"message":"Parâmetros inválidos. Verificar erro na resposta."},{"code":400,"message":"Erro de sintaxe JSON no corpo do request."}]},{"notes":"","summary":"Cancela um perfil de pagamento existente através do ID.","nickname":"DELETE--version-payment_profiles--id---format-","method":"DELETE","parameters":[{"paramType":"path","name":"id","description":"\u003cp\u003eID do perfil de pagamento a ser cancelado.\u003c/p\u003e\n","type":"integer","required":true,"allowMultiple":false,"format":"int32"}],"type":"PaymentProfile","responseMessages":[{"code":200,"message":"Perfil de pagamento cancelado com sucesso."},{"code":404,"message":"Perfil de pagamento não encontrado."},{"code":422,"message":"Parâmetros inválidos. Verificar erro na resposta."},{"code":400,"message":"Erro de sintaxe JSON no corpo do request."}]}]},{"path":"/v1/payment_profiles/{id}/verify","operations":[{"notes":"\u003cp\u003eEste método permite verificar se um perfil de pagamento existente é válido na entidade emissora. Apenas o método de pagamento cartão de crédito suporta esta operação.\u003c/p\u003e\n\n\u003cp\u003eUtilize esta função para validar um perfil de pagamento antes da criação de uma assinatura que não possua cobrança imediata. Este método é desnecessário para assinaturas com cobrança imediata.\u003c/p\u003e\n\n\u003ch4 id=\"funcionamento\"\u003eFuncionamento\u003c/h4\u003e\n\u003cp\u003ePreferencialmente a plataforma Vindi irá executar o método de validação fornecido nativamente pelas adquirentes. Caso este método não esteja disponível, a plataforma poderá realizar uma autorização seguida de um cancelamento.\u003c/p\u003e\n\n\u003ch4 id=\"resultado\"\u003eResultado\u003c/h4\u003e\n\u003cp\u003ePara verificar o resultado da validação, verifique no retorno se \u003ccode\u003estatus=success\u003c/code\u003e.\u003c/p\u003e\n\n\u003ch4 id=\"disponibilidade\"\u003eDisponibilidade\u003c/h4\u003e\n\u003cp\u003eEsta funcionalidade estará disponível para testes enquanto sua conta Vindi estiver no modo trial. Para habilitar no modo produção, instale a extensão “Transação de verificação” acessando \u003cstrong\u003e\u003cem\u003eConfigurações \u0026gt; Extensões \u0026amp; Integrações\u003c/em\u003e\u003c/strong\u003e no painel de administração da plataforma. Taxas adicionais por verificação poderão ser cobradas.\u003c/p\u003e\n","summary":"Verifica a validade de um perfil de pagamento existente através do ID.","nickname":"POST--version-payment_profiles--id-verify---format-","method":"POST","parameters":[{"paramType":"path","name":"id","description":"\u003cp\u003eID do perfil de pagamento que deverá ser verificado.\u003c/p\u003e\n","type":"integer","required":true,"allowMultiple":false,"format":"int32"}],"type":"Transaction","responseMessages":[{"code":201,"message":"Ok. Transação de verificação realizada com sucesso."},{"code":404,"message":"Perfil de pagamento não encontrado."},{"code":422,"message":"Parâmetros inválidos. Verificar erro na resposta."},{"code":400,"message":"Erro de sintaxe JSON no corpo do request."}]}]}],"basePath":"https://app.vindi.com.br/api","models":{"PaymentProfile":{"id":"PaymentProfile","properties":{"id":{"type":"integer","description":"ID do perfil de pagamento","format":"int32"},"status":{"type":"string","description":"Status do perfil de pagamento","enum":["active","inactive","deleted"]},"holder_name":{"type":"string","description":"Nome do titular/portador do perfil de pagamento"},"registry_code":{"type":"string","description":"CPF ou CNPJ do titular/portador"},"bank_branch":{"type":"string","description":"Agência da conta bancária"},"bank_account":{"type":"string","description":"Número da conta bancária"},"card_expiration":{"type":"string","description":"Validade do cartão de crédito no formato MM/AA"},"card_number_first_six":{"type":"string","description":"Primeiros 6 dígitos do cartão de crédito (BIN/IIN)"},"card_number_last_four":{"type":"string","description":"Últimos 4 dígitos do cartão de crédito"},"token":{"type":"string","description":"Token para referência do perfil de pagamento"},"gateway_token":{"type":"string","description":"Token externo"},"type":{"type":"string","description":"Tipo do perfil de pagamento"},"created_at":{"type":"string","description":"Data e hora do cadastro do perfil de pagamento"},"updated_at":{"type":"string","description":"Data e hora da última atualização do perfil de pagamento"},"payment_company":{"$ref":"PaymentCompany","description":"Bandeira ou banco do perfil de pagamento"},"payment_method":{"$ref":"PaymentMethod::Summary","description":"Método de pagamento do perfil de pagamento"},"customer":{"$ref":"Customer::Summary","description":"Cliente associado ao perfil de pagamento"}},"required":["id","status","token","type","created_at","updated_at","payment_company","payment_method","customer"]},"PaymentCompany":{"id":"PaymentCompany","properties":{"id":{"type":"integer","description":"ID da bandeira ou banco","format":"int32"},"name":{"type":"string","description":"Nome da bandeira ou banco"},"code":{"type":"string","description":"Código para referência via API"}},"required":["id","name","code"]},"PaymentMethod::Summary":{"id":"PaymentMethod::Summary","properties":{"id":{"type":"integer","description":"ID do método de pagamento","format":"int32"},"public_name":{"type":"string","description":"Nome público do método de pagamento"},"name":{"type":"string","description":"Nome interno do método de pagamento"},"code":{"type":"string","description":"Código externo para referência via API"},"type":{"type":"string","description":"Tipo do método de pagamento"}},"required":["id","public_name","name","code","type"]},"Customer::Summary":{"id":"Customer::Summary","properties":{"id":{"type":"integer","description":"ID do cliente","format":"int32"},"name":{"type":"string","description":"Nome do cliente"},"email":{"type":"string","description":"E-mail do cliente"},"code":{"type":"string","description":"Código opcional para referência via API"}},"required":["id","name"]},"PaymentProfile::Parameters::Create":{"id":"PaymentProfile::Parameters::Create","properties":{"holder_name":{"type":"string","description":"Nome do titular/portador do perfil de pagamento"},"registry_code":{"type":"string","description":"CPF ou CNPJ do titular/portador"},"bank_branch":{"type":"string","description":"Agência da conta bancária"},"bank_account":{"type":"string","description":"Número da conta bancária"},"card_expiration":{"type":"string","description":"Validade do cartão de crédito no formato MM/AA"},"card_number":{"type":"string","description":"Número completo do cartão de crédito"},"card_cvv":{"type":"string","description":"Código de segurança do cartão de crédito com 3 ou 4 dígitos"},"payment_method_code":{"type":"string","description":"Código do método de pagamento"},"payment_company_code":{"type":"string","description":"Código do banco ou bandeira"},"gateway_token":{"type":"string","description":"Token externo"},"customer_id":{"type":"integer","description":"ID do cliente associado ao perfil de pagamento","format":"int32"}},"required":["customer_id"]},"Transaction":{"id":"Transaction","properties":{"id":{"type":"integer","description":"ID da transação","format":"int32"},"transaction_type":{"type":"string","description":"Tipo da transação","enum":["charge","refund","authorization","capture","verify","register","void","renew_payment_profile","pre_authorization","update"]},"status":{"type":"string","description":"Status da transação","enum":["processing","success","rejected","failure","timeout","waiting","canceled","fraud_review"]},"amount":{"$ref":"number","description":"Valor da transação"},"installments":{"type":"integer","description":"Número de parcelas","format":"int32"},"gateway_message":{"type":"string","description":"Mensagem de resposta do gateway"},"gateway_response_code":{"type":"string","description":"Código de resposta do gateway"},"gateway_authorization":{"type":"string","description":"Código da autorização usado no estorno ou captura. Varia de acordo com o adquirente"},"gateway_transaction_id":{"type":"string","description":"Código externo de referência do gateway. Para boletos, representa o \"nosso número\""},"gateway_response_fields":{"$ref":"hash","description":"Atributos de resposta específicos do gateway"},"fraud_detector_score":{"$ref":"number","description":"Pontuação da análise antifraude entre 0.00 e 1.00. Quanto maior a pontuação, maior o risco de fraude"},"fraud_detector_status":{"type":"string","description":"Status da análise antifraude","enum":["automatic_success","manual_success","automatic_rejected","manual_rejected","review","failure"]},"fraud_detector_id":{"type":"string","description":"ID da análise antifraude"},"created_at":{"type":"string","description":"Data e hora da transação"},"updated_at":{"type":"string","description":"Data e hora da última atualização da transação"},"gateway":{"$ref":"Gateway::Summary","description":"Gateway usado na transação"},"payment_profile":{"$ref":"PaymentProfile::Summary","description":"Perfil de pagamento usado na transação"},"charge":{"$ref":"Charge::Summary","description":"Cobrança que gerou esta transação"},"customer":{"$ref":"Customer::Summary","description":"Cliente da transação"},"payment_method":{"$ref":"PaymentMethod::Summary","description":"Método de pagamento da transação"}},"required":["id","transaction_type","status","amount","installments","gateway_message","gateway_response_code","gateway_authorization","gateway_transaction_id","created_at","updated_at","gateway","payment_profile","charge","customer","payment_method"]},"Gateway::Summary":{"id":"Gateway::Summary","properties":{"id":{"type":"integer","description":"ID do gateway","format":"int32"},"connector":{"type":"string","description":"Conector utilizado no gateway"}},"required":["id","connector"]},"PaymentProfile::Summary":{"id":"PaymentProfile::Summary","properties":{"id":{"type":"integer","description":"ID do perfil de pagamento","format":"int32"},"holder_name":{"type":"string","description":"Nome do titular/portador do perfil de pagamento"},"registry_code":{"type":"string","description":"CPF ou CNPJ do titular/portador"},"bank_branch":{"type":"string","description":"Agência da conta bancária"},"bank_account":{"type":"string","description":"Número da conta bancária"},"card_expiration":{"type":"string","description":"Validade do cartão de crédito no formato MM/AA"},"card_number_first_six":{"type":"string","description":"Primeiros 6 dígitos do cartão de crédito (BIN/IIN)"},"card_number_last_four":{"type":"string","description":"Últimos 4 dígitos do cartão de crédito"},"token":{"type":"string","description":"Token interno para referência do perfil de pagamento"},"created_at":{"type":"string","description":"Data e hora do cadastro do perfil de pagamento"},"payment_company":{"$ref":"PaymentCompany","description":"Bandeira ou banco do perfil de pagamento"}},"required":["id","token","created_at","payment_company"]},"Charge::Summary":{"id":"Charge::Summary","properties":{"id":{"type":"integer","description":"ID da cobrança","format":"int32"}},"required":["id"]}}}
